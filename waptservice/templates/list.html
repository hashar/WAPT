{% extends "layout.html" %}
{% block content %}
{% macro link(href,desc='') -%}
	{% if desc == '' %}
		<a href={{href}}>{{href}}</a>
	{% else%}
		<a href={{href}}>{{desc}}</a>
	{%endif%}
{%- endmacro%}
<script>
function refresh()
	{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","update",true);
xmlhttp.send();
location.reload(true);
}
</script>
<h1>Available packages</h1>
<input onclick='refresh()' type="button" name="update" value="Mise Ã  jour les paquets disponibles" />
{% set cols = ['package','version','description','filename'] %}
<table border=1 cellspacing=0 cellpadding=4 class=sample>
	<tr>
		{% for c in cols %}
			<th>
			{{c}}
			</th>
		{% endfor %}
		<th>Action<th>
	</tr>
	{% for p in packages %}
		<tr>
		{% for c in cols %}
		<td>
		  {{p[c]}}
		</td>
	{% endfor %}
			<td><a href="install?package={{p.package}}">Install</a></td>

	</tr>
{% endfor %}
</table>
{% endblock %}
